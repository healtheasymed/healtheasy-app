"use strict";(globalThis["webpackChunkhealtheasy_frontend"]=globalThis["webpackChunkhealtheasy_frontend"]||[]).push([[442],{1442:(e,l,a)=>{a.r(l),a.d(l,{default:()=>ee});var o=a(9835),t=a(1957),r=a(6970);const i=e=>((0,o.dD)("data-v-703b0c9f"),e=e(),(0,o.Cn)(),e),u=i((()=>(0,o._)("h5",null,"Perfil",-1))),s={key:0,class:"row q-mb-md q-col-gutter-sm"},n={class:"col-12 col-md-6"},d={class:"col-12 col-md-6"},m={class:"row q-mt-md justify-center q-col-gutter-lg"},c={class:"col-12 col-md-5"},p={class:"col-12 col-md-5"};function f(e,l,a,i,f,v){const g=(0,o.up)("InputImage"),b=(0,o.up)("q-input"),h=(0,o.up)("q-select"),V=(0,o.up)("q-chip"),w=(0,o.up)("q-btn"),y=(0,o.up)("q-form"),C=(0,o.up)("q-page");return(0,o.wg)(),(0,o.j4)(C,{padding:""},{default:(0,o.w5)((()=>[(0,o.Wm)(y,{onSubmit:(0,t.iM)(e.onSubmit,["prevent"])},{default:(0,o.w5)((()=>[u,(0,o.Wm)(g,{ref:"inputImageRef",modelValue:e.form.avatar_url,"onUpdate:modelValue":l[0]||(l[0]=l=>e.form.avatar_url=l),label:"Foto de Perfil",disable:e.isDisabled,showDefaultProfileIcon:"",onImgError:l[1]||(l[1]=l=>e.showError=!!l)},null,8,["modelValue","disable"]),(0,o.Wm)(b,{modelValue:e.form.email,"onUpdate:modelValue":l[2]||(l[2]=l=>e.form.email=l),type:"email",label:"E-mail",hint:"Não é possível alterar o e-mail.",class:"q-mb-md",outlined:"",disable:""},null,8,["modelValue"]),(0,o.Wm)(b,{modelValue:e.form.name,"onUpdate:modelValue":l[3]||(l[3]=l=>e.form.name=l),type:"text",label:"doctor"===e.form.role?"Nome Completo":"Nome da Clínica",class:"q-mb-sm",outlined:"","lazy-rules":"",rules:[e=>e&&e.length>=6||"Por favor, informe o nome completo."]},null,8,["modelValue","label","rules"]),(0,o.Wm)(b,{modelValue:e.form.phone,"onUpdate:modelValue":l[4]||(l[4]=l=>e.form.phone=l),type:"text",label:"Celular",class:"q-mb-md",outlined:"","lazy-rules":"",mask:"(##) ##### - ####",hint:"Formato: (12) 91234 - 5678",rules:[e=>e&&e.length>0||"Por favor, informe o celular.",e=>e&&e.length>16||"Por favor, informe um número de celular válido."]},null,8,["modelValue","rules"]),"doctor"===e.form.role?((0,o.wg)(),(0,o.iD)("div",s,[(0,o._)("div",n,[(0,o.Wm)(b,{modelValue:e.form.crm,"onUpdate:modelValue":l[5]||(l[5]=l=>e.form.crm=l),type:"text",label:"CRM",outlined:"","lazy-rules":"",rules:[e=>e&&e.length>0||"Por favor, informe o CRM."]},null,8,["modelValue","rules"])]),(0,o._)("div",d,[(0,o.Wm)(h,{modelValue:e.form.state,"onUpdate:modelValue":l[6]||(l[6]=l=>e.form.state=l),label:"Estado de Atuação",options:e.states,outlined:"","option-label":"nome","option-value":"nome","emit-value":"","map-options":"","lazy-rules":"",rules:[e=>e&&e.length>0||"Por favor, informe o Estado de Atuação."]},null,8,["modelValue","options","rules"])])])):(0,o.kq)("",!0),(0,o.Wm)(h,{modelValue:e.form.specialties,"onUpdate:modelValue":l[7]||(l[7]=l=>e.form.specialties=l),label:"Especialidade(s)",options:e.specialtiesOptions,outlined:"","option-label":"value","option-value":"value",multiple:"","use-chips":"","stack-label":"","emit-value":"","lazy-rules":"",rules:[e=>e&&e.length>0||"Por favor, informe ao menos uma Especialidade."]},{"selected-item":(0,o.w5)((e=>[(0,o.Wm)(V,{class:"q-px-md",color:"primary","text-color":"white",icon:"mdi-check",square:"",outline:"",size:"md",removable:"",onRemove:l=>e.removeAtIndex(e.index)},{default:(0,o.w5)((()=>[(0,o.Uk)((0,r.zw)(e.opt),1)])),_:2},1032,["onRemove"])])),_:1},8,["modelValue","options","rules"]),(0,o._)("div",m,[(0,o._)("div",c,[(0,o.Wm)(w,{label:"Descartar",type:"reset",color:"negative",class:"full-width",outline:"",disable:!e.formHasChanged,onClick:e.onDiscardChanges},null,8,["disable","onClick"])]),(0,o._)("div",p,[(0,o.Wm)(w,{label:"Registrar",type:"submit",color:"positive",class:"full-width",outline:e.isDisabled||!e.formHasChanged,disable:e.isDisabled||!e.formHasChanged},null,8,["outline","disable"])])])])),_:1},8,["onSubmit"])])),_:1})}a(6204),a(7924);var v=a(499),g=a(8339),b=a(9302),h=a(1809),V=a(6144),w=a(8968),y=a(1149),C=a(8957),q=a(7360),U=a(5472),Z=a(8997);a(6727);const _=e=>((0,o.dD)("data-v-c014083a"),e=e(),(0,o.Cn)(),e),I=_((()=>(0,o._)("div",{class:"absolute-full flex flex-center bg-negative text-white"}," URL inválida ",-1)));function k(e,l,a,i,u,s){const n=(0,o.up)("q-img"),d=(0,o.up)("q-icon"),m=(0,o.up)("q-tab"),c=(0,o.up)("q-btn"),p=(0,o.up)("q-tabs"),f=(0,o.up)("q-separator"),v=(0,o.up)("q-input"),g=(0,o.up)("q-tab-panel"),b=(0,o.up)("q-file"),h=(0,o.up)("q-tab-panels"),V=(0,o.up)("q-card");return(0,o.wg)(),(0,o.j4)(V,{flat:"",class:"flex column items-center full-width"},{default:(0,o.w5)((()=>[e.modelValue||e.fileUrl?((0,o.wg)(),(0,o.j4)(n,{key:0,"spinner-color":"primary","spinner-size":"20px",class:(0,r.C_)(["data__img q-mb-md",e.errorClass]),src:e.modelValue||e.fileUrl,ratio:4/3,onError:e.handleErrorClass},{error:(0,o.w5)((()=>[I])),_:1},8,["src","class","onError"])):(0,o.kq)("",!0),e.modelValue||e.fileUrl||!e.showDefaultProfileIcon?(0,o.kq)("",!0):((0,o.wg)(),(0,o.j4)(d,{key:1,color:"primary",name:"mdi-account-circle-outline",size:"10em"})),(0,o.Wm)(p,{modelValue:e.tab,"onUpdate:modelValue":l[0]||(l[0]=l=>e.tab=l),dense:"",class:"text-grey full-width","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:(0,o.w5)((()=>[(0,o.Wm)(m,{name:"pasteUrl",label:"Colar URL"}),(0,o.Wm)(m,{name:"upload",label:"Enviar do Computador"}),e.modelValue&&e.modelValue.includes("supabase.co/storage")?((0,o.wg)(),(0,o.j4)(c,{key:0,icon:"mdi-delete",color:"negative",square:"",onClick:e.handleDeleteImage},null,8,["onClick"])):(0,o.kq)("",!0)])),_:1},8,["modelValue"]),(0,o.Wm)(f,{class:"full-width"}),(0,o.Wm)(h,{modelValue:e.tab,"onUpdate:modelValue":l[4]||(l[4]=l=>e.tab=l),class:"full-width",animated:""},{default:(0,o.w5)((()=>[(0,o.Wm)(g,{name:"pasteUrl"},{default:(0,o.w5)((()=>[(0,o.Wm)(v,{type:"text",outline:"","error-message":"Por favor, verifique a URL informada.",label:e.label,error:!!e.errorClass,disable:e.disable,"model-value":e.modelValue,"onUpdate:modelValue":e.handleUpdateImgURL},(0,o.Nv)({_:2},[e.modelValue&&e.modelValue.includes("supabase.co/storage")?{name:"append",fn:(0,o.w5)((()=>[(0,o.Wm)(d,{name:"mdi-information",color:"warning",class:"cursor-pointer",onClick:l[1]||(l[1]=(0,t.iM)((l=>e.dialogDefault("Atenção!","Essa imagem está salva\n                no nosso servidor. Caso queira excluí-la, clique no botão de exclusão.")),["stop","prevent"]))})]))}:void 0]),1032,["label","error","disable","model-value","onUpdate:modelValue"])])),_:1}),(0,o.Wm)(g,{name:"upload"},{default:(0,o.w5)((()=>[(0,o.Wm)(b,{modelValue:e.imgFile,"onUpdate:modelValue":[l[3]||(l[3]=l=>e.imgFile=l),e.handleUpdateImgFile],accept:"image/*",outline:"",label:e.label,disable:e.disable},(0,o.Nv)({prepend:(0,o.w5)((()=>[(0,o.Wm)(d,{name:"attach_file"})])),_:2},[e.imgFile?{name:"append",fn:(0,o.w5)((()=>[(0,o.Wm)(d,{name:"mdi-close",onClick:l[2]||(l[2]=(0,t.iM)((l=>e.imgFile=null),["stop","prevent"])),class:"cursor-pointer"})]))}:void 0]),1032,["modelValue","label","disable","onUpdate:modelValue"])])),_:1})])),_:1},8,["modelValue"])])),_:1})}a(702),a(4641),a(3269);var W=a(7572);const P=(0,o.aZ)({name:"InputImage",emits:["imgError","update:modelValue"],props:{disable:{default:!1,required:!1,type:Boolean},label:{default:"Imagem",required:!1,type:String},modelValue:{default:"",required:!1,type:String},showDefaultProfileIcon:{default:!1,required:!1,type:Boolean}},setup(e,{emit:l}){var a;const t=(0,b.Z)(),{uploadImg:r,removeProfileImg:i}=(0,W.Z)(),{notifyError:u,notifySuccess:s}=(0,C.Z)(),{dialogDefault:n,dialogConfirm:d}=(0,y.Z)(),m=(0,v.iH)("pasteUrl"),c=(0,v.iH)(null===(a=e.modelValue)||void 0===a?void 0:a.value),p=(0,v.iH)(null),f=(0,v.iH)(""),g=(0,v.iH)("");(0,o.YP)(g,(e=>{l("imgError",e)}));const h=e=>{e&&"error"===e.type?g.value="error":g.value=""},V=()=>{p.value=null,f.value=""},w=()=>{h(),l("update:modelValue","")},q=e=>{h(),g.value||(V(),l("update:modelValue",e.trim()))},U=()=>{h(),!g.value&&p.value&&(w(),f.value=URL.createObjectURL(p.value),l("update:modelValue",f.value.trim()))},Z=()=>{d("Você realmente deseja excluir a imagem?","A ação não poderá ser desfeita.",(async()=>{t.loading.show(),await i("profile-image",[p.value]),w(),V(),s("A imagem foi excluída."),t.loading.hide()}))},_=async()=>{if(p.value&&p.value!==c.value)try{const e=await r("profile-image",p.value);l("update:modelValue",e.trim()),s("A imagem foi salva com sucesso!")}catch(e){u("Erro ao salvar a imagem! Tente novamente, por favor.")}};return{tab:m,imgFile:p,errorClass:g,dialogDefault:n,handleUpdateImgURL:q,handleUpdateImgFile:U,handleErrorClass:h,fileUrl:f,handleDeleteImage:Z,uploadFileOnSubmit:_}}});var E=a(1639),x=a(4458),D=a(335),Q=a(2857),F=a(7817),R=a(900),H=a(8879),S=a(926),j=a(9800),z=a(4106),A=a(3119),L=a(3837),T=a(9984),N=a.n(T);const M=(0,E.Z)(P,[["render",k],["__scopeId","data-v-c014083a"]]),O=M;N()(P,"components",{QCard:x.Z,QImg:D.Z,QIcon:Q.Z,QTabs:F.Z,QTab:R.Z,QBtn:H.Z,QSeparator:S.Z,QTabPanels:j.Z,QTabPanel:z.Z,QInput:A.Z,QFile:L.Z});const B=(0,o.aZ)({name:"ProfilePage",components:{InputImage:O},setup(){const e=(0,b.Z)(),{dialogConfirm:l}=(0,y.Z)(),{notifyError:a,notifyInfo:t,notifySuccess:r}=(0,C.Z)(),i=(0,V.L)(),{user:u}=(0,h.Jk)(i),s=e=>i.updateUser(e),n=(0,w.n)(),{states:d}=(0,h.Jk)(n),m=(0,v.iH)(!1),c=(0,v.iH)(!1),p=(0,v.iH)(!1),f=structuredClone(q.Z),_=q.Z,I=(0,v.iH)(null);(0,o.YP)(_,(()=>{c.value=(0,Z.Ck)(f.value,_.value)}),{deep:!0}),(0,o.YP)(u,(e=>{e&&(f.value=structuredClone(e),_.value=e)})),(0,g.iS)(((e,a,o)=>{const t=a.path!==e.path;t&&c.value?l("Você realmente deseja sair da página?","Ao sair, todas as alterações serão descartadas.",(()=>{o()})):o()}));const k=()=>{l("Você realmente deseja descartar as alterações?","A ação não poderá ser desfeita.",(()=>{_.value=structuredClone(f.value)}))},W=async()=>{if(c.value)try{e.loading.show(),p.value=!0,await I.value.uploadFileOnSubmit();const l=await s(_.value);l&&(f.value=structuredClone(l),_.value=l),r("Perfil atualizado com sucesso!"),c.value=!1}catch(l){a(l.message)}finally{e.loading.hide(),p.value=!1}else t("Nenhuma modificação identificada.")};return(0,o.bv)((()=>{u.value&&(f.value=structuredClone(u.value),_.value=u.value)})),{form:_,inputImageRef:I,showError:m,states:d,specialtiesOptions:U.c,isDisabled:p,formHasChanged:c,onDiscardChanges:k,onSubmit:W}}});var Y=a(9885),J=a(8326),G=a(2259),K=a(7691),X=a(8149);const $=(0,E.Z)(B,[["render",f],["__scopeId","data-v-703b0c9f"]]),ee=$;N()(B,"components",{QPage:Y.Z,QForm:J.Z,QInput:A.Z,QSelect:G.Z,QChip:K.Z,QBtn:H.Z,QField:X.Z})}}]);