"use strict";(globalThis["webpackChunkhealtheasy_frontend"]=globalThis["webpackChunkhealtheasy_frontend"]||[]).push([[721],{721:(e,a,l)=>{l.r(a),l.d(a,{default:()=>Ve});var o=l(9835);function i(e,a,l,i,t,s){const d=(0,o.up)("q-tab"),n=(0,o.up)("q-tabs"),r=(0,o.up)("IdentificationForm"),u=(0,o.up)("q-tab-panel"),m=(0,o.up)("TreatmentsForm"),c=(0,o.up)("q-tab-panels"),p=(0,o.up)("q-page");return(0,o.wg)(),(0,o.j4)(p,{padding:""},{default:(0,o.w5)((()=>[(0,o.Wm)(n,{modelValue:e.tab,"onUpdate:modelValue":a[0]||(a[0]=a=>e.tab=a),"inline-label":"","outside-arrows":"","mobile-arrows":"","narrow-indicator":"",align:"left","active-color":"primary","indicator-color":"primary",class:"text-primary bg-white"},{default:(0,o.w5)((()=>[(0,o.Wm)(d,{name:"identification",icon:"mdi-account-plus",label:"Identificação"}),(0,o.Wm)(d,{name:"treatment",icon:"mdi-medical-bag",label:"Atendimentos",disable:!e.isUpdate},null,8,["disable"])])),_:1},8,["modelValue"]),(0,o.Wm)(c,{modelValue:e.tab,"onUpdate:modelValue":a[1]||(a[1]=a=>e.tab=a),animated:"","keep-alive":""},{default:(0,o.w5)((()=>[(0,o.Wm)(u,{name:"identification"},{default:(0,o.w5)((()=>[(0,o.Wm)(r)])),_:1}),(0,o.Wm)(u,{name:"treatment"},{default:(0,o.w5)((()=>[(0,o.Wm)(m)])),_:1})])),_:1},8,["modelValue"])])),_:1})}var t=l(499),s=l(8339),d=l(1957),n=l(6970);const r=(0,o.Uk)(" Descartar "),u=(0,o.Uk)(" Registrar "),m=(0,o.Uk)(" Remover da Clínica "),c=(0,o.Uk)(" Adicionar à Clínica "),p=(0,o._)("h6",{class:"q-mb-md"},"Dados Pessoais",-1),v={class:"row q-mb-md q-col-gutter-sm"},f={class:"col-12 col-md-6"},b={class:"col-12 col-md-6"},g={class:"row q-mb-md q-col-gutter-sm"},h={class:"col-12 col-md-6"},_={class:"col-12 col-md-6"},w=(0,o._)("h6",{class:"q-mb-lg"},"Contato",-1),y={class:"row q-mb-md q-col-gutter-sm"},q={class:"col-12 col-md-6"},C={class:"col-12 col-md-6"},k=(0,o._)("h6",{class:"q-mb-lg"},"Dados Médicos",-1),V=(0,o._)("p",null,[(0,o.Uk)("Digite o nome do plano e tecle "),(0,o._)("b",null,"ENTER"),(0,o.Uk)(", ou clique no botão "),(0,o._)("b",null,"+"),(0,o.Uk)(" para adicioná-lo.")],-1),W=(0,o._)("h6",{class:"q-mb-md"},"Buscar médico(a)",-1),D={class:"row q-mb-md q-col-gutter-sm"},U={class:"col-12 col-md-6"},Z=(0,o._)("div",{class:"col-12 col-md-6"},null,-1);function F(e,a,l,i,t,s){const F=(0,o.up)("q-tooltip"),R=(0,o.up)("q-btn"),P=(0,o.up)("q-page-sticky"),x=(0,o.up)("q-input"),I=(0,o.up)("q-select"),Q=(0,o.up)("InputDate"),T=(0,o.up)("q-chip"),A=(0,o.up)("q-icon"),H=(0,o.up)("q-form");return(0,o.wg)(),(0,o.j4)(H,{onSubmit:(0,d.iM)(e.onSubmit,["prevent"]),onReset:e.onDiscardChanges},{default:(0,o.w5)((()=>[e.isDoctorRegistered||e.isUpdate?((0,o.wg)(),(0,o.j4)(P,{key:0,position:"bottom-right",offset:[18,18]},{default:(0,o.w5)((()=>[e.isUpdate?((0,o.wg)(),(0,o.iD)(o.HY,{key:0},[(0,o.Wm)(R,{type:"reset",color:"negative",padding:"sm",class:"q-mr-sm",icon:"mdi-cancel",fab:"",disable:!e.formHasChanged},{default:(0,o.w5)((()=>[(0,o.Wm)(F,{anchor:"top middle",self:"center middle",offset:[18,18]},{default:(0,o.w5)((()=>[r])),_:1})])),_:1},8,["disable"]),(0,o.Wm)(R,{type:"submit",color:"positive",padding:"sm",icon:"mdi-content-save",fab:"",disable:!e.formHasChanged},{default:(0,o.w5)((()=>[(0,o.Wm)(F,{anchor:"top middle",self:"center middle",offset:[18,18]},{default:(0,o.w5)((()=>[u])),_:1})])),_:1},8,["disable"])],64)):((0,o.wg)(),(0,o.iD)(o.HY,{key:1},[(0,o.Wm)(R,{color:"negative",padding:"sm",class:"q-mr-sm",icon:"mdi-delete",fab:"",disable:!e.isAlreadyBelongToClinic,onClick:e.removeOfClinic},{default:(0,o.w5)((()=>[(0,o.Wm)(F,{anchor:"top middle",self:"center middle",offset:[18,18]},{default:(0,o.w5)((()=>[m])),_:1})])),_:1},8,["disable","onClick"]),(0,o.Wm)(R,{color:"positive",padding:"sm",icon:"mdi-plus",fab:"",disable:e.isAlreadyBelongToClinic,onClick:e.addToClinic},{default:(0,o.w5)((()=>[(0,o.Wm)(F,{anchor:"top middle",self:"center middle",offset:[18,18]},{default:(0,o.w5)((()=>[c])),_:1})])),_:1},8,["disable","onClick"])],64))])),_:1})):(0,o.kq)("",!0),e.isDoctorRegistered||e.isUpdate?((0,o.wg)(),(0,o.iD)(o.HY,{key:1},[p,(0,o.Wm)(x,{modelValue:e.profileForm.name,"onUpdate:modelValue":a[0]||(a[0]=a=>e.profileForm.name=a),type:"text",label:"Nome Completo",class:"q-mb-sm",outlined:"","lazy-rules":"",rules:[e=>e&&e.length>=6||"Por favor, informe o nome completo."],disable:e.isDoctorRegistered},null,8,["modelValue","rules","disable"]),(0,o._)("div",v,[(0,o._)("div",f,[(0,o.Wm)(x,{modelValue:e.form.crm,"onUpdate:modelValue":a[1]||(a[1]=a=>e.form.crm=a),type:"text",label:"CRM",outlined:"","lazy-rules":"",rules:[e=>e&&e.length>0||"Por favor, informe o CRM."],disable:e.isDoctorRegistered},null,8,["modelValue","rules","disable"])]),(0,o._)("div",b,[(0,o.Wm)(I,{modelValue:e.form.state,"onUpdate:modelValue":a[2]||(a[2]=a=>e.form.state=a),label:"Estado de Atuação",outlined:"",options:e.states,"option-label":"nome","option-value":"nome","emit-value":"","map-options":"","lazy-rules":"",rules:[e=>e&&e.length>0||"Por favor, informe o Estado de Atuação."],disable:e.isDoctorRegistered},null,8,["modelValue","options","rules","disable"])])]),(0,o._)("div",g,[(0,o._)("div",h,[(0,o.Wm)(I,{modelValue:e.form.sex,"onUpdate:modelValue":a[3]||(a[3]=a=>e.form.sex=a),label:"Sexo",options:e.sexOptions,outlined:"","stack-label":"","lazy-rules":"",rules:[e=>e&&e.length>0||"Por favor, informe o sexo."],disable:e.isDoctorRegistered},null,8,["modelValue","options","rules","disable"])]),(0,o._)("div",_,[(0,o.Wm)(Q,{modelValue:e.birthDate,"onUpdate:modelValue":a[4]||(a[4]=a=>e.birthDate=a),label:"Data de Nascimento",rules:[e=>e&&10===e.length||"Por favor, informe a data de nascimento.",a=>a&&a!==e.getTodayLocaleDate()||"Por favor, a data de nascimento deve ser diferente da data atual."],disable:e.isDoctorRegistered},null,8,["modelValue","rules","disable"])])]),w,(0,o._)("div",y,[(0,o._)("div",q,[(0,o.Wm)(x,{modelValue:e.profileForm.email,"onUpdate:modelValue":a[5]||(a[5]=a=>e.profileForm.email=a),type:"email",label:"E-mail",outlined:"","lazy-rules":"",rules:[e=>e&&e.length>=5||"Por favor, informe o e-mail."],disable:e.isDoctorRegistered},null,8,["modelValue","rules","disable"])]),(0,o._)("div",C,[(0,o.Wm)(x,{modelValue:e.profileForm.phone,"onUpdate:modelValue":a[6]||(a[6]=a=>e.profileForm.phone=a),type:"text",label:"Whatsapp",class:"q-mb-md",outlined:"","lazy-rules":"",mask:"(##) ##### - ####",hint:"Formato: (12) 91234 - 5678",rules:[e=>e&&e.length>0||"Por favor, informe o celular.",e=>e&&e.length>16||"Por favor, informe um número de celular válido."],disable:e.isDoctorRegistered},null,8,["modelValue","rules","disable"])])]),k,(0,o.Wm)(I,{ref:"healthPlansSelectRef",modelValue:e.form.plans,"onUpdate:modelValue":a[8]||(a[8]=a=>e.form.plans=a),label:"Plano(s) de Saúde",class:"q-mb-lg","new-value-mode":"add-unique",outlined:"","use-input":"","use-chips":"",multiple:"","bottom-slots":"","hide-dropdown-icon":"",onInputValue:a[9]||(a[9]=a=>e.plans=a),disable:e.isDoctorRegistered},{hint:(0,o.w5)((()=>[V])),"selected-item":(0,o.w5)((e=>[(0,o.Wm)(T,{class:"q-px-md",color:"primary","text-color":"white",icon:"mdi-check",square:"",outline:"",size:"md",removable:"",onRemove:a=>e.removeAtIndex(e.index)},{default:(0,o.w5)((()=>[(0,o.Uk)((0,n.zw)(e.opt),1)])),_:2},1032,["onRemove"])])),append:(0,o.w5)((()=>[(0,o.Wm)(R,{color:"primary",icon:"mdi-plus",flat:"",dense:"",onClick:a[7]||(a[7]=a=>e.onAddItem(e.plans,e.healthPlansSelectRef))})])),_:1},8,["modelValue","disable"]),(0,o.Wm)(I,{modelValue:e.form.specialties,"onUpdate:modelValue":a[10]||(a[10]=a=>e.form.specialties=a),label:"Especialidade(s)",options:e.specialtiesOptions,outlined:"","option-label":"value","option-value":"value",multiple:"","use-chips":"","stack-label":"","emit-value":"","lazy-rules":"",rules:[e=>e&&e.length>0||"Por favor, informe ao menos uma Especialidade."]},{"selected-item":(0,o.w5)((e=>[(0,o.Wm)(T,{class:"q-px-md",color:"primary","text-color":"white",icon:"mdi-check",square:"",outline:"",size:"md",removable:"",onRemove:a=>e.removeAtIndex(e.index)},{default:(0,o.w5)((()=>[(0,o.Uk)((0,n.zw)(e.opt),1)])),_:2},1032,["onRemove"])])),_:1},8,["modelValue","options","rules"])],64)):((0,o.wg)(),(0,o.iD)(o.HY,{key:2},[W,(0,o._)("div",D,[(0,o._)("div",U,[(0,o.Wm)(x,{modelValue:e.profileForm.email,"onUpdate:modelValue":a[11]||(a[11]=a=>e.profileForm.email=a),type:"email",label:"E-mail",outlined:"","lazy-rules":"",rules:[e=>e&&e.length>=5||"Por favor, informe o e-mail."],onKeyup:a[12]||(a[12]=(0,d.D2)((a=>{var l;return(null===(l=e.profileForm.email)||void 0===l?void 0:l.length)>=5&&e.searchDoctorByEmail()}),["enter"]))},(0,o.Nv)({_:2},[e.profileForm.email&&e.profileForm.email.length>=5?{name:"append",fn:(0,o.w5)((()=>[(0,o.Wm)(A,{name:"mdi-magnify",onClick:e.searchDoctorByEmail,class:"cursor-pointer"},null,8,["onClick"])]))}:void 0]),1032,["modelValue","rules"])]),Z])],64))])),_:1},8,["onSubmit","onReset"])}l(6204),l(7924),l(702);var R=l(9302),P=l(1809),x=l(7572),I=l(1149),Q=l(8957),T=l(4995),A=l(9149),H=l(8997),S=l(3788),z=l(5472),E=l(7338),B=l(6144),j=l(8968);const L=(0,o.aZ)({name:"IdentificationForm",components:{InputDate:E.Z},setup(){const e=(0,R.Z)(),a=(0,s.yj)(),{filteredList:l,getById:i,getByProfileId:d,post:n,update:r}=(0,x.Z)(),{dialogConfirm:u}=(0,I.Z)(),{notifyError:m,notifyInfo:c,notifySuccess:p}=(0,Q.Z)(),v=(0,B.L)(),f=(0,j.n)(),{states:b}=(0,P.Jk)(f),g=(0,o.Fl)((()=>!!a.params.id)),h=(0,t.iH)(!1),_=(0,t.iH)(!1),w=(0,t.iH)(!1),y=(0,t.iH)(!1),q=(0,T.Lw)(),C=structuredClone(q),k=(0,T.q$)(),V=structuredClone(k),W=A.S,D=(0,t.iH)((0,S.kq)()),U=(0,t.iH)(null),Z=(0,t.iH)(null),F=(0,o.Fl)((()=>C.value?g.value?(0,S.gd)(C.value.birth_date):C.value.birth_date:D.value)),E=(0,o.Fl)((()=>v.getUserId)),L=(0,o.Fl)((()=>v.getUserRole)),M=(0,o.Fl)((()=>{var e;return!(null===(e=q.value.clinic_id)||void 0===e||!e.filter((e=>e===E.value)))||!1})),Y=(e,a)=>{e&&""!==e&&(a.add(e),a.updateInputValue(""))},N=async()=>{try{e.loading.show(),y.value=!0;const[a]=await l("profiles",{column:"email",value:k.value.email},"\n            id,\n            name,\n            email,\n            phone,\n            role\n          ");if(a&&"doctor"===a.role)return h.value=!0,V.value=structuredClone(a),void(k.value=a)}catch(a){m(a.message)}finally{e.loading.hide(),y.value=!1}};(0,o.YP)([q,k,D],(()=>{const e=(0,S.y8)(F.value,D.value);if(e)return void(w.value=e);const a=(0,H.Ck)(C.value,q.value),l=(0,H.Ck)(V.value,k.value);w.value=a||l}),{deep:!0});const O=async()=>{try{e.loading.show(),y.value=!0;const l=await i("profiles",a.params.id);l&&(V.value=structuredClone(l),k.value=l)}catch(l){m(l.message)}finally{e.loading.hide(),y.value=!1}},$=async()=>{try{e.loading.show(),y.value=!0;const a=await d("doctors",k.value.id);a&&(a.birth_date=(0,S.gd)(a.birth_date),C.value=structuredClone(a),q.value=a,D.value=a.birth_date)}catch(a){m(a.message)}finally{e.loading.hide(),y.value=!1}},J=async()=>{try{e.loading.show(),q.value.clinic_id?q.value.clinic_id.push(E.value):q.value.clinic_id=[E.value],await r("doctors",q.value),p("Médico(a) adicionado à Clínica!")}catch(a){m(a.message)}finally{e.loading.hide()}},K=async()=>{try{e.loading.show(),q.value.clinic_id?q.value.clinic_id=q.value.clinic_id.filter((e=>e!==E.value)):q.value.clinic_id=null,await r("doctors",q.value),p("Médico(a) removido da Clínica!")}catch(a){m(a.message)}finally{e.loading.hide()}};(0,s.iS)(((e,a,l)=>{const o=a.path!==e.path;o&&w.value?u("Você realmente deseja sair da página?","Ao sair, todas as alterações serão descartadas.",(()=>{l()})):l()}));const G=()=>{u("Você realmente deseja descartar as alterações?","A ação não poderá ser desfeita.",(()=>{q.value=structuredClone(C.value),k.value=structuredClone(V.value),D.value=F.value}))},X=async()=>{if(h.value&&"clinic"===L.value)m("Alterações de dados pessoais somente deverão ser feitas através da conta deste usuário.");else if(w.value)try{e.loading.show(),y.value=!0,q.value.birth_date=(0,S.oV)(D.value),k.value.role="doctor";const a=q.value.clinic_id.find((e=>Number(e)===E.value));"clinic"!==L.value||a||(q.value.clinic_id=q.value.clinic_id?[...q.value.clinic_id,E.value]:E.value),g.value?(await r("profiles",k.value),await r("doctors",q.value)):(k.value=await n("profiles",k.value),q.value.profile_id=k.value.id,await n("doctors",q.value)),p(`Médico(a) ${g.value?"atualizado":"cadastrado"} com sucesso!`),w.value=!1}catch(a){m(a.message)}finally{e.loading.hide(),y.value=!1}else c("Nenhuma modificação identificada.")};return(0,o.YP)(h,(e=>!!e&&$())),(0,o.bv)((async()=>{g.value&&(await O(),await $()),C.value=structuredClone(q.value),V.value=structuredClone(k.value)})),(0,o.Ah)((()=>{q.value=(0,T.Lw)(),C.value=structuredClone(q),k.value=(0,T.q$)(),V.value=structuredClone(k)})),{form:q,profileForm:k,sexOptions:W,birthDate:D,states:b,getTodayLocaleDate:S.kq,showError:_,isUpdate:g,isDoctorRegistered:h,isDisabled:y,isAlreadyBelongToClinic:M,formHasChanged:w,healthPlansSelectRef:U,plans:Z,specialtiesOptions:z.c,onDiscardChanges:G,searchDoctorByEmail:N,onAddItem:Y,onSubmit:X,addToClinic:J,removeOfClinic:K}}});var M=l(1639),Y=l(8326),N=l(3388),O=l(8879),$=l(6858),J=l(3119),K=l(2259),G=l(7691),X=l(2857),ee=l(9984),ae=l.n(ee);const le=(0,M.Z)(L,[["render",F]]),oe=le;ae()(L,"components",{QForm:Y.Z,QPageSticky:N.Z,QBtn:O.Z,QTooltip:$.Z,QInput:J.Z,QSelect:K.Z,QChip:G.Z,QIcon:X.Z});const ie=(0,o._)("h6",{class:"q-mb-md"},"Listagem dos Atendimentos",-1),te=(0,o._)("p",{class:"text-h6 text-bold q-mr-md"}," Dr(a) Fulana de Tal",-1),se=(0,o._)("p",{class:"q-mr-md"},[(0,o.Uk)("Início: "),(0,o._)("b",null,"10/11/2022 21:49")],-1),de=(0,o._)("p",null,[(0,o.Uk)("Fim: "),(0,o._)("b",null,"10/11/2022 21:49")],-1),ne=(0,o.Uk)(" Visualizar ");function re(e,a,l,i,t,s){const d=(0,o.up)("q-card-section"),n=(0,o.up)("q-separator"),r=(0,o.up)("q-icon"),u=(0,o.up)("q-btn"),m=(0,o.up)("q-card-actions"),c=(0,o.up)("q-card");return(0,o.wg)(),(0,o.iD)(o.HY,null,[ie,(0,o.Wm)(c,{class:"bg-grey-8 text-white"},{default:(0,o.w5)((()=>[(0,o.Wm)(d,{class:"bg-grey-9 flex items-center q-pb-sm"},{default:(0,o.w5)((()=>[te,se,de])),_:1}),(0,o.Wm)(n,{dark:""}),(0,o.Wm)(m,null,{default:(0,o.w5)((()=>[(0,o.Wm)(u,{dense:"",flat:""},{default:(0,o.w5)((()=>[(0,o.Wm)(r,{name:"mdi-eye",class:"q-mr-sm"}),ne])),_:1})])),_:1})])),_:1})],64)}const ue=(0,o.aZ)({name:"TreatmentsForm"});var me=l(4458),ce=l(3190),pe=l(926),ve=l(1821);const fe=(0,M.Z)(ue,[["render",re]]),be=fe;ae()(ue,"components",{QCard:me.Z,QCardSection:ce.Z,QSeparator:pe.Z,QCardActions:ve.Z,QBtn:O.Z,QIcon:X.Z});const ge=(0,o.aZ)({name:"FormPage",components:{IdentificationForm:oe,TreatmentsForm:be},setup(){const e=(0,s.yj)();return{tab:(0,t.iH)("identification"),isUpdate:(0,o.Fl)((()=>!!e.params.id))}}});var he=l(9885),_e=l(7817),we=l(900),ye=l(9800),qe=l(4106),Ce=l(8149);const ke=(0,M.Z)(ge,[["render",i],["__scopeId","data-v-722cf7d1"]]),Ve=ke;ae()(ge,"components",{QPage:he.Z,QTabs:_e.Z,QTab:we.Z,QTabPanels:ye.Z,QTabPanel:qe.Z,QField:Ce.Z,QChip:G.Z})}}]);