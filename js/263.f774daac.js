"use strict";(globalThis["webpackChunkhealtheasy_frontend"]=globalThis["webpackChunkhealtheasy_frontend"]||[]).push([[263],{9263:(e,a,t)=>{t.r(a),t.d(a,{default:()=>qe});var n=t(9835),l=t(1957);const o=(0,n.Uk)(" Descartar "),i=(0,n.Uk)(" Registrar ");function s(e,a,t,s,d,r){const m=(0,n.up)("q-tooltip"),c=(0,n.up)("q-btn"),u=(0,n.up)("q-page-sticky"),p=(0,n.up)("q-tab"),f=(0,n.up)("q-tabs"),b=(0,n.up)("IdentificationForm"),h=(0,n.up)("q-tab-panel"),g=(0,n.up)("AnamnesisForm"),_=(0,n.up)("q-tab-panels"),v=(0,n.up)("q-form"),w=(0,n.up)("q-page");return(0,n.wg)(),(0,n.j4)(w,{padding:""},{default:(0,n.w5)((()=>[(0,n.Wm)(v,{onSubmit:(0,l.iM)(e.onSubmit,["prevent"]),onReset:e.onDiscardChanges},{default:(0,n.w5)((()=>[(0,n.Wm)(u,{position:"bottom-right",offset:[18,18]},{default:(0,n.w5)((()=>[(0,n.Wm)(c,{type:"reset",color:"negative",padding:"sm",class:"q-mr-sm",icon:"mdi-cancel",fab:"",disable:!e.formHasChanged},{default:(0,n.w5)((()=>[(0,n.Wm)(m,{anchor:"top middle",self:"center middle",offset:[18,18]},{default:(0,n.w5)((()=>[o])),_:1})])),_:1},8,["disable"]),(0,n.Wm)(c,{type:"submit",color:"positive",padding:"sm",icon:"mdi-content-save",fab:"",disable:!e.formHasChanged},{default:(0,n.w5)((()=>[(0,n.Wm)(m,{anchor:"top middle",self:"center middle",offset:[18,18]},{default:(0,n.w5)((()=>[i])),_:1})])),_:1},8,["disable"])])),_:1}),(0,n.Wm)(f,{modelValue:e.tab,"onUpdate:modelValue":a[1]||(a[1]=a=>e.tab=a),"inline-label":"","outside-arrows":"","mobile-arrows":"","narrow-indicator":"",align:"left","active-color":"primary","indicator-color":"primary",class:"text-primary bg-white"},{default:(0,n.w5)((()=>[(0,n.Wm)(p,{name:"identification",icon:"mdi-account-plus",label:"Identificação"}),(0,n.Wm)(p,{name:"anamnesis",icon:"mdi-stethoscope",label:"Anamnese"}),(0,n.Wm)(c,{class:"absolute-right memed-button",icon:"add",label:"Receituário",onClick:a[0]||(a[0]=a=>e.$router.push({name:"form-treatment"}))})])),_:1},8,["modelValue"]),(0,n.Wm)(_,{modelValue:e.tab,"onUpdate:modelValue":a[2]||(a[2]=a=>e.tab=a),animated:"","keep-alive":""},{default:(0,n.w5)((()=>[(0,n.Wm)(h,{name:"identification"},{default:(0,n.w5)((()=>[(0,n.Wm)(b)])),_:1}),(0,n.Wm)(h,{name:"anamnesis"},{default:(0,n.w5)((()=>[(0,n.Wm)(g)])),_:1})])),_:1},8,["modelValue"])])),_:1},8,["onSubmit","onReset"])])),_:1})}var d=t(499),r=t(8339),m=t(1809),c=t(2072),u=t(1149),p=t(6970);const f={class:"self-center full-width no-outline",tabindex:"0"},b={class:"self-center full-width no-outline",tabindex:"0"},h=(0,n.Uk)(" Nenhum resultado encontrado. ");function g(e,a,t,l,o,i){const s=(0,n.up)("q-item-section"),d=(0,n.up)("q-item"),r=(0,n.up)("q-list"),m=(0,n.up)("q-btn-dropdown"),c=(0,n.up)("q-editor"),u=(0,n.up)("q-field"),g=(0,n.up)("q-chip"),_=(0,n.up)("q-select"),v=(0,n.Q2)("close-popup");return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n.Wm)(u,{label:"Anamnese / Exame Físico / Sinais e Sintomas","stack-label":"",outlined:"",class:"q-mb-lg"},{control:(0,n.w5)((()=>[(0,n._)("div",f,[(0,n.Wm)(c,{modelValue:e.anamnesisForm.exam,"onUpdate:modelValue":a[0]||(a[0]=a=>e.anamnesisForm.exam=a),dense:e.$q.screen.lt.md,flat:"",toolbar:[["anmnesisExamples"],[{label:e.$q.lang.editor.align,icon:e.$q.iconSet.editor.align,fixedLabel:!0,options:["left","center","right","justify"]}],["bold","italic","strike","underline","subscript","superscript"],["token","hr","link","custom_btn"],["print","fullscreen"],[{label:e.$q.lang.editor.formatting,icon:e.$q.iconSet.editor.formatting,list:"no-icons",options:["p","h1","h2","h3","h4","h5","h6","code"]},{label:e.$q.lang.editor.fontSize,icon:e.$q.iconSet.editor.fontSize,fixedLabel:!0,fixedIcon:!0,list:"no-icons",options:["size-1","size-2","size-3","size-4","size-5","size-6","size-7"]},{label:e.$q.lang.editor.defaultFont,icon:e.$q.iconSet.editor.font,fixedIcon:!0,list:"no-icons",options:["default_font","arial","arial_black","comic_sans","courier_new","impact","lucida_grande","times_new_roman","verdana"]},"removeFormat"],["quote","unordered","ordered","outdent","indent"],["undo","redo"]],fonts:{arial:"Arial",arial_black:"Arial Black",comic_sans:"Comic Sans MS",courier_new:"Courier New",impact:"Impact",lucida_grande:"Lucida Grande",times_new_roman:"Times New Roman",verdana:"Verdana"}},(0,n.Nv)({_:2},[e.anamnesisTemplates?{name:"anmnesisExamples",fn:(0,n.w5)((()=>[(0,n.Wm)(m,{dense:"","no-caps":"",ref:"anmnesisExamplesRef","no-wrap":"",unelevated:"",color:"white","text-color":"primary",label:"Modelos de Anamnese",size:"sm"},{default:(0,n.w5)((()=>[(0,n.Wm)(r,{dense:""},{default:(0,n.w5)((()=>[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.anamnesisTemplates,((a,t)=>(0,n.wy)(((0,n.wg)(),(0,n.j4)(d,{key:t,tag:"label",clickable:"",onClick:t=>e.setAnamesisTemplate(a)},{default:(0,n.w5)((()=>[(0,n.Wm)(s,null,{default:(0,n.w5)((()=>[(0,n.Uk)((0,p.zw)(a.title),1)])),_:2},1024)])),_:2},1032,["onClick"])),[[v]]))),128))])),_:1})])),_:1},512)]))}:void 0]),1032,["modelValue","dense","toolbar"])])])),_:1}),(0,n.Wm)(u,{label:"Avaliação e Plano","stack-label":"",outlined:"",class:"q-mb-lg"},{control:(0,n.w5)((()=>[(0,n._)("div",b,[(0,n.Wm)(c,{modelValue:e.anamnesisForm.medical_plan,"onUpdate:modelValue":a[1]||(a[1]=a=>e.anamnesisForm.medical_plan=a),dense:e.$q.screen.lt.md,flat:"",toolbar:[[{label:e.$q.lang.editor.align,icon:e.$q.iconSet.editor.align,fixedLabel:!0,list:"only-icons",options:["left","center","right","justify"]}],["bold","italic","strike","underline","subscript","superscript"],["token","hr","link","custom_btn"],["print","fullscreen"],[{label:e.$q.lang.editor.formatting,icon:e.$q.iconSet.editor.formatting,list:"no-icons",options:["p","h1","h2","h3","h4","h5","h6","code"]},{label:e.$q.lang.editor.fontSize,icon:e.$q.iconSet.editor.fontSize,fixedLabel:!0,fixedIcon:!0,list:"no-icons",options:["size-1","size-2","size-3","size-4","size-5","size-6","size-7"]},{label:e.$q.lang.editor.defaultFont,icon:e.$q.iconSet.editor.font,fixedIcon:!0,list:"no-icons",options:["default_font","arial","arial_black","comic_sans","courier_new","impact","lucida_grande","times_new_roman","verdana"]},"removeFormat"],["quote","unordered","ordered","outdent","indent"],["undo","redo"],["viewsource"]],fonts:{arial:"Arial",arial_black:"Arial Black",comic_sans:"Comic Sans MS",courier_new:"Courier New",impact:"Impact",lucida_grande:"Lucida Grande",times_new_roman:"Times New Roman",verdana:"Verdana"}},null,8,["modelValue","dense","toolbar"])])])),_:1}),(0,n.Wm)(_,{modelValue:e.anamnesisForm.cid,"onUpdate:modelValue":a[2]||(a[2]=a=>e.anamnesisForm.cid=a),label:"CID",class:"q-mb-lg",outlined:"","use-input":"",options:e.cidList,"option-value":"id","option-label":"description","emit-value":"","map-options":"",multiple:"","use-chips":"",loading:e.isLoading,onVirtualScroll:e.onCidSelectScroll,onInputValue:a[3]||(a[3]=a=>e.onSearchCid(a))},{"selected-item":(0,n.w5)((e=>[(0,n.Wm)(g,{class:"q-px-md",color:"primary","text-color":"white",icon:"mdi-check",square:"",outline:"",size:"md",removable:"",onRemove:a=>e.removeAtIndex(e.index)},{default:(0,n.w5)((()=>[(0,n.Uk)((0,p.zw)(e.opt.description),1)])),_:2},1032,["onRemove"])])),"no-option":(0,n.w5)((()=>[(0,n.Wm)(d,null,{default:(0,n.w5)((()=>[(0,n.Wm)(s,{class:"text-grey"},{default:(0,n.w5)((()=>[h])),_:1})])),_:1})])),_:1},8,["modelValue","options","loading","onVirtualScroll"])],64)}var _=t(8997);const v=(0,n.aZ)({name:"AnamnesisForm",setup(){const e=(0,c.E)(),{isLoading:a,isDisabled:t,treatmentForm:l,anamnesisFormHasChanged:o,anamnesisForm:i,initialAnamnesisForm:s,cidList:r,searchedCid:u,anamnesisTemplates:p}=(0,m.Jk)(e),f=()=>e.fetchAnamnesis(),b=()=>e.fetchAnamnesisTemplates(),h=a=>e.fetchCIDs(a),g=(0,d.iH)(0),v=(0,d.iH)(null),w=(0,d.iH)(null),q=(0,n.Fl)((()=>!!l.value.anamnesis_id));(0,n.YP)(i,(()=>{o.value=(0,_.Ck)(s.value,i.value)}),{deep:!0});const k=e=>{i.value.exam=e.html},P=e=>{u.value=e,h()},y=({to:e})=>{if(u.value)return;const t=r.value.length-1;a.value||e!==t||(g.value+=1,setTimeout((()=>{h(g.value)}),500))},C=(e,a)=>{e&&""!==e&&(a.add(e),a.updateInputValue(""))};return(0,n.bv)((()=>{q.value&&f(),b(),h()})),{anamnesisFormHasChanged:o,isLoading:a,isDisabled:t,anamnesisForm:i,anamnesisTemplates:p,setAnamesisTemplate:k,cidList:r,searchedCid:u,onCidSelectScroll:y,onSearchCid:P,fetchCIDs:h,cid:w,cidsSelectRef:v,onAddItem:C}}});var w=t(1639),q=t(8149),k=t(7699),P=t(8479),y=t(3246),C=t(490),F=t(1233),S=t(2259),V=t(7691),A=t(2146),D=t(9984),x=t.n(D);const Z=(0,w.Z)(v,[["render",g],["__scopeId","data-v-5ba107be"]]),z=Z;x()(v,"components",{QField:q.Z,QEditor:k.Z,QBtnDropdown:P.Z,QList:y.Z,QItem:C.Z,QItemSection:F.Z,QSelect:S.Z,QChip:V.Z}),x()(v,"directives",{ClosePopup:A.Z});const W=(0,n._)("h6",{class:"q-mb-md"},"Dados do Atendimento",-1),Q={class:"row q-mb-md q-col-gutter-sm"},I={class:"col-12 col-md-6"},T={class:"col-12 col-md-6"},U=(0,n._)("h6",{class:"q-mb-md"},"Dados do Paciente",-1),$=(0,n.Uk)(" Exibir Ficha do Paciente "),L={class:"text-h6 text-bold"},j=(0,n.Uk)(" Nascimento: "),H={key:0},R={key:0},N=(0,n.Uk)(" Planos: "),E={key:1},M=(0,n.Uk)(" Doenças Prévias: "),Y={key:2},B=(0,n.Uk)(" Medicamentos em Uso: "),J={key:3},G=(0,n.Uk)(" Alergias: ");function K(e,a,t,o,i,s){const d=(0,n.up)("q-input"),r=(0,n.up)("q-checkbox"),m=(0,n.up)("InputDateTime"),c=(0,n.up)("q-tooltip"),u=(0,n.up)("q-icon"),f=(0,n.up)("q-select"),b=(0,n.up)("q-card-section"),h=(0,n.up)("q-separator"),g=(0,n.up)("q-card");return(0,n.wg)(),(0,n.iD)(n.HY,null,[W,e.userAuth&&"doctor"===e.userAuthRole&&e.userAuth.user_metadata.name?((0,n.wg)(),(0,n.j4)(d,{key:0,modelValue:e.userAuth.user_metadata.name,"onUpdate:modelValue":a[0]||(a[0]=a=>e.userAuth.user_metadata.name=a),type:"text",label:"Médico(a) Responsável",class:"q-mb-sm",disable:"",outlined:"","lazy-rules":"",rules:[e=>e&&e.length>=6||"Por favor, informe o nome do profissional responsável."]},null,8,["modelValue","rules"])):e.selectedDoctor?((0,n.wg)(),(0,n.j4)(d,{key:1,modelValue:e.selectedDoctor.name,"onUpdate:modelValue":a[1]||(a[1]=a=>e.selectedDoctor.name=a),type:"text",label:"Médico(a) Responsável",class:"q-mb-sm",disable:"",outlined:"","lazy-rules":"",rules:[e=>e&&e.length>=6||"Por favor, informe o nome do profissional responsável."]},null,8,["modelValue","rules"])):(0,n.kq)("",!0),(0,n.Wm)(r,{modelValue:e.isPaidTreatment,"onUpdate:modelValue":a[2]||(a[2]=a=>e.isPaidTreatment=a),class:"q-mb-md","checked-icon":"task_alt",label:"Particular"},null,8,["modelValue"]),(0,n._)("div",Q,[(0,n._)("div",I,[(0,n.Wm)(d,{modelValue:e.treatmentForm.plan,"onUpdate:modelValue":a[3]||(a[3]=a=>e.treatmentForm.plan=a),type:"text",label:"Plano de Saúde",class:"q-mb-sm",outlined:"","lazy-rules":"",rules:[e=>e&&e.length>=4||"Por favor, informe o nome plano de saúde."]},null,8,["modelValue","rules"])]),(0,n._)("div",T,[(0,n.Wm)(m,{modelValue:e.treatmentDate,"onUpdate:modelValue":a[4]||(a[4]=a=>e.treatmentDate=a),label:"Data",rules:[e=>e&&16===e.length||"Por favor, informe a data e hora."]},null,8,["modelValue","rules"])])]),U,e.patientsList?((0,n.wg)(),(0,n.j4)(f,{key:2,modelValue:e.treatmentForm.patient_id,"onUpdate:modelValue":[a[7]||(a[7]=a=>e.treatmentForm.patient_id=a),a[8]||(a[8]=a=>e.showPatientCard=!1)],label:"Paciente",outlined:"",options:e.patientsList,"option-label":"name","option-value":"id","emit-value":"","map-options":"","lazy-rules":"",rules:[e=>e&&e>0||"Por favor, informe o paciente."]},(0,n.Nv)({_:2},[e.treatmentForm.patient_id?{name:"append",fn:(0,n.w5)((()=>[(0,n.Wm)(c,{anchor:"top middle",self:"center middle"},{default:(0,n.w5)((()=>[$])),_:1}),e.selectedPatient?((0,n.wg)(),(0,n.j4)(u,{key:1,name:"mdi-eye-off",onClick:a[6]||(a[6]=(0,l.iM)((a=>e.showPatientCard=!1),["stop","prevent"]))})):((0,n.wg)(),(0,n.j4)(u,{key:0,name:"mdi-eye",onClick:a[5]||(a[5]=(0,l.iM)((a=>e.showPatientCard=!0),["stop","prevent"]))}))]))}:void 0]),1032,["modelValue","options","rules"])):(0,n.kq)("",!0),e.showPatientCard&&e.selectedPatient?((0,n.wg)(),(0,n.j4)(g,{key:3,class:"bg-blue-grey-8 text-white"},{default:(0,n.w5)((()=>[(0,n.Wm)(b,{class:"bg-blue-grey-9 flex column q-pb-sm"},{default:(0,n.w5)((()=>[(0,n._)("p",L,(0,p.zw)(e.selectedPatient.name||e.selectedPatient.social_name)+" - "+(0,p.zw)(e.selectedPatient.sex),1),(0,n._)("p",null,[j,(0,n._)("b",null,[(0,n.Uk)((0,p.zw)(e.getLocaleDateFormatted(e.selectedPatient.birth_date))+" ",1),e.getAge(e.selectedPatient.birth_date)?((0,n.wg)(),(0,n.iD)("span",H," ( "+(0,p.zw)(e.getAge(e.selectedPatient.birth_date))+" anos ) ",1)):(0,n.kq)("",!0)])])])),_:1}),(0,n.Wm)(h,{dark:""}),(0,n.Wm)(b,{class:"flex column"},{default:(0,n.w5)((()=>[e.selectedPatient.plans?((0,n.wg)(),(0,n.iD)("p",R,[N,(0,n._)("b",null,(0,p.zw)(e.selectedPatient.plans.join(",")),1)])):(0,n.kq)("",!0),e.selectedPatient.previous_illnesses?((0,n.wg)(),(0,n.iD)("p",E,[M,(0,n._)("b",null,(0,p.zw)(e.selectedPatient.previous_illnesses.join(",")),1)])):(0,n.kq)("",!0),e.selectedPatient.usual_medications?((0,n.wg)(),(0,n.iD)("p",Y,[B,(0,n._)("b",null,(0,p.zw)(e.selectedPatient.usual_medications.join(",")),1)])):(0,n.kq)("",!0),e.selectedPatient.allergies?((0,n.wg)(),(0,n.iD)("p",J,[G,(0,n._)("b",null,(0,p.zw)(e.selectedPatient.allergies.join(",")),1)])):(0,n.kq)("",!0)])),_:1})])),_:1})):(0,n.kq)("",!0)],64)}t(6204),t(7924);var O=t(9355),X=t(3788),ee=t(4705);const ae=(0,n.aZ)({name:"IdentificationForm",components:{InputDateTime:ee.Z},setup(){const e=(0,r.yj)(),a=(0,c.E)(),{isDisabled:t,identificationFormHasChanged:l,treatmentForm:o,initialTreatmentForm:i,treatmentDate:s,patientsList:u,selectedPatient:p,selectedDoctor:f,showPatientCard:b}=(0,m.Jk)(a),h=()=>a.fetchAllPatients(),g=()=>a.fetchSelectedPatient(),v=e=>a.fetchSelectedDoctor(e),w=e=>a.fetchTreatment(e),{userAuth:q,userAuthRole:k}=(0,O.Z)(),P=(0,n.Fl)((()=>!!e.params.id||!!i.value.id)),y=(0,n.Fl)((()=>!(!e.query.id||"patient"!==e.query.role))),C=(0,n.Fl)((()=>!(!e.query.id||"doctor"!==e.query.role))),F=(0,d.iH)(!1),S=(0,n.Fl)((()=>P.value?(0,X.rN)(i.value.date):i.value.date));(0,n.YP)(F,(e=>{o.value.plan=e?"Particular":i.value.plan})),(0,n.YP)([o,s],(()=>{const e=(0,X.y8)(S.value,s.value);l.value=e||(0,_.Ck)(i.value,o.value)}),{deep:!0}),(0,n.YP)(b,(e=>{if(!e)return void(p.value=null);const a=p.value&&p.value.id===o.value.patient_id;a||g()}));const V=()=>{const a=u.value.find((a=>a.id===Number(e.query.id)));a&&(i.value.patient_id=a.id,o.value.patient_id=a.id)};return(0,n.bv)((async()=>{i.value=structuredClone(o.value),await h(),y.value?V():C.value?v(e.query.id):P.value&&w(e.params.id)})),{identificationFormHasChanged:l,isDisabled:t,userAuth:q,userAuthRole:k,treatmentForm:o,treatmentDate:s,patientsList:u,selectedPatient:p,selectedDoctor:f,showPatientCard:b,getLocaleDateFormatted:X.gd,getAge:X.Ay,isPaidTreatment:F}}});var te=t(3119),ne=t(1221),le=t(6858),oe=t(2857),ie=t(4458),se=t(3190),de=t(926),re=t(8879);const me=(0,w.Z)(ae,[["render",K]]),ce=me;x()(ae,"components",{QInput:te.Z,QCheckbox:ne.Z,QSelect:S.Z,QTooltip:le.Z,QIcon:oe.Z,QCard:ie.Z,QCardSection:se.Z,QSeparator:de.Z,QBtn:re.Z});const ue=(0,n.aZ)({name:"FormPage",components:{AnamnesisForm:z,IdentificationForm:ce},setup(){const{dialogConfirm:e}=(0,u.Z)(),a=(0,c.E)(),{formHasChanged:t}=(0,m.Jk)(a),l=()=>a.onSubmit(),o=()=>a.discardFormChanges(),i=(0,d.iH)("identification");(0,r.iS)(((a,n,l)=>{const o=n.path!==a.path;o&&t.value?e("Você realmente deseja sair da página?","Ao sair, todas as alterações serão descartadas.",(()=>{l()})):l()}));const s=()=>{e("Você realmente deseja descartar as alterações?","A ação não poderá ser desfeita.",(()=>o()))};return(0,n.Ah)((()=>a.$reset())),{tab:i,formHasChanged:t,onDiscardChanges:s,onSubmit:l}}});var pe=t(9885),fe=t(8326),be=t(3388),he=t(7817),ge=t(900),_e=t(9800),ve=t(4106);const we=(0,w.Z)(ue,[["render",s],["__scopeId","data-v-2e9bbd84"]]),qe=we;x()(ue,"components",{QPage:pe.Z,QForm:fe.Z,QPageSticky:be.Z,QBtn:re.Z,QTooltip:le.Z,QTabs:he.Z,QTab:ge.Z,QTabPanels:_e.Z,QTabPanel:ve.Z})}}]);